<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Numeric.Sum</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Numeric-Sum.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">math-functions-0.1.7.0: Special functions and Chebyshev polynomials</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Copyright</th><td>(c) 2014 Bryan O'Sullivan</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>bos@serpentine.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>portable</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Numeric.Sum</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Summation type class</a><ul><li><a href="#g:2">Usage</a></li></ul></li><li><a href="#g:3">Kahan-Babu&#353;ka-Neumaier summation</a></li><li><a href="#g:4">Order-2 Kahan-Babu&#353;ka summation</a></li><li><a href="#g:5">Less desirable approaches</a><ul><li><a href="#g:6">Kahan summation</a></li><li><a href="#g:7">Pairwise summation</a></li></ul></li><li><a href="#g:8">References</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Functions for summing floating point numbers more accurately than
 the naive <code><a href="../base-4.8.2.0/Data-Foldable.html#v:sum">sum</a></code> function and its counterparts in the
 <code>vector</code> package and elsewhere.</p><p>When used with floating point numbers, in the worst case, the
 <code><a href="../base-4.8.2.0/Data-Foldable.html#v:sum">sum</a></code> function accumulates numeric error at a rate
 proportional to the number of values being summed. The algorithms
 in this module implement different methods of /compensated
 summation/, which reduce the accumulation of numeric error so that
 it either grows much more slowly than the number of inputs
 (e.g. logarithmically), or remains constant.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">class</span> <a href="#t:Summation">Summation</a> s <span class="keyword">where</span><ul class="subs"><li><a href="#v:zero">zero</a> :: s</li><li><a href="#v:add">add</a> :: s -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; s</li><li><a href="#v:sum">sum</a> :: <a href="../base-4.8.2.0/Data-Foldable.html#t:Foldable">Foldable</a> f =&gt; (s -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>) -&gt; f <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li></ul></li><li class="src short"><a href="#v:sumVector">sumVector</a> :: (<a href="../vector-0.11.0.0/Data-Vector-Generic.html#t:Vector">Vector</a> v <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="Numeric-Sum.html#t:Summation">Summation</a> s) =&gt; (s -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>) -&gt; v <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:KBNSum">KBNSum</a> = <a href="#v:KBNSum">KBNSum</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li class="src short"><a href="#v:kbn">kbn</a> :: <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:KB2Sum">KB2Sum</a> = <a href="#v:KB2Sum">KB2Sum</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li class="src short"><a href="#v:kb2">kb2</a> :: <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:KahanSum">KahanSum</a> = <a href="#v:KahanSum">KahanSum</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li class="src short"><a href="#v:kahan">kahan</a> :: <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li><li class="src short"><a href="#v:pairwiseSum">pairwiseSum</a> :: <a href="../vector-0.11.0.0/Data-Vector-Generic.html#t:Vector">Vector</a> v <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> =&gt; v <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></li></ul></div><div id="interface"><h1 id="g:1">Summation type class</h1><div class="top"><p class="src"><span class="keyword">class</span> <a name="t:Summation" class="def">Summation</a> s <span class="keyword">where</span></p><div class="doc"><p>A class for summation of floating point numbers.</p></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Numeric-Sum.html#v:zero">zero</a>, <a href="Numeric-Sum.html#v:add">add</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:zero" class="def">zero</a> :: s</p><div class="doc"><p>The identity for summation.</p></div><p class="src"><a name="v:add" class="def">add</a> :: s -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; s</p><div class="doc"><p>Add a value to a sum.</p></div><p class="src"><a name="v:sum" class="def">sum</a> :: <a href="../base-4.8.2.0/Data-Foldable.html#t:Foldable">Foldable</a> f =&gt; (s -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>) -&gt; f <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></p><div class="doc"><p>Sum a collection of values.</p><p>Example:
 <code>foo = <code><a href="../base-4.8.2.0/Data-Foldable.html#v:sum">sum</a></code> <code><a href="Numeric-Sum.html#v:kbn">kbn</a></code> [1,2,3]</code></p></div></div><div class="subs instances"><p id="control.i:Summation" class="caption collapser" onclick="toggleSection('i:Summation')">Instances</p><div id="section.i:Summation" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="Numeric-Sum.html#t:Summation">Summation</a> <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Numeric-Sum.html#t:Summation">Summation</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Numeric-Sum.html#t:Summation">Summation</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Numeric-Sum.html#t:Summation">Summation</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:sumVector" class="def">sumVector</a> :: (<a href="../vector-0.11.0.0/Data-Vector-Generic.html#t:Vector">Vector</a> v <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="Numeric-Sum.html#t:Summation">Summation</a> s) =&gt; (s -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>) -&gt; v <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></p><div class="doc"><p><em>O(n)</em> Sum a vector of values.</p></div></div><h2 id="g:2">Usage</h2><div class="doc"><p>Most of these summation algorithms are intended to be used via the
 <code><a href="Numeric-Sum.html#t:Summation">Summation</a></code> typeclass interface. Explicit type annotations should
 not be necessary, as the use of a function such as <code><a href="Numeric-Sum.html#v:kbn">kbn</a></code> or <code><a href="Numeric-Sum.html#v:kb2">kb2</a></code>
 to extract the final sum out of a <code><a href="Numeric-Sum.html#t:Summation">Summation</a></code> instance gives the
 compiler enough information to determine the precise type of
 summation algorithm to use.</p><p>As an example, here is a (somewhat silly) function that manually
 computes the sum of elements in a list.</p><pre>sillySumList :: [Double] -&gt; Double
sillySumList = loop <code><a href="Numeric-Sum.html#v:zero">zero</a></code>
  where loop s []     = <code><a href="Numeric-Sum.html#v:kbn">kbn</a></code> s
        loop s (x:xs) = <code><a href="../base-4.8.2.0/Prelude.html#v:seq">seq</a></code> s' loop s' xs
          where s'    = <code><a href="Numeric-Sum.html#v:add">add</a></code> s x
</pre><p>In most instances, you can simply use the much more general <code><a href="../base-4.8.2.0/Data-Foldable.html#v:sum">sum</a></code>
 function instead of writing a summation function by hand.</p><pre>-- Avoid ambiguity around which sum function we are using.
import Prelude hiding (sum)
--
betterSumList :: [Double] -&gt; Double
betterSumList xs = <code><a href="../base-4.8.2.0/Data-Foldable.html#v:sum">sum</a></code> <code><a href="Numeric-Sum.html#v:kbn">kbn</a></code> xs
</pre></div><h1 id="g:3">Kahan-Babu&#353;ka-Neumaier summation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:KBNSum" class="def">KBNSum</a></p><div class="doc"><p>Kahan-Babu&#353;ka-Neumaier summation. This is a little more
 computationally costly than plain Kahan summation, but is <em>always</em>
 at least as accurate.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:KBNSum" class="def">KBNSum</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:KBNSum" class="caption collapser" onclick="toggleSection('i:KBNSum')">Instances</p><div id="section.i:KBNSum" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../deepseq-1.4.1.1/Control-DeepSeq.html#t:NFData">NFData</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Unbox">Unbox</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Numeric-Sum.html#t:Summation">Summation</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Generic.html#t:Vector">Vector</a> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Generic-Mutable-Base.html#t:MVector">MVector</a> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">data</span> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a> = <a name="v:V_KBNSum" class="def">V_KBNSum</a> (<a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> (<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">data</span> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> s <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a> = <a name="v:MV_KBNSum" class="def">MV_KBNSum</a> (<a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> s (<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>))</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:kbn" class="def">kbn</a> :: <a href="Numeric-Sum.html#t:KBNSum">KBNSum</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></p><div class="doc"><p>Return the result of a Kahan-Babu&#353;ka-Neumaier sum.</p></div></div><h1 id="g:4">Order-2 Kahan-Babu&#353;ka summation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:KB2Sum" class="def">KB2Sum</a></p><div class="doc"><p>Second-order Kahan-Babu&#353;ka summation.  This is more
 computationally costly than Kahan-Babu&#353;ka-Neumaier summation,
 running at about a third the speed.  Its advantage is that it can
 lose less precision (in admittedly obscure cases).</p><p>This method compensates for error in both the sum and the
 first-order compensation term, hence the use of &quot;second order&quot; in
 the name.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:KB2Sum" class="def">KB2Sum</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:KB2Sum" class="caption collapser" onclick="toggleSection('i:KB2Sum')">Instances</p><div id="section.i:KB2Sum" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../deepseq-1.4.1.1/Control-DeepSeq.html#t:NFData">NFData</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Unbox">Unbox</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Numeric-Sum.html#t:Summation">Summation</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Generic.html#t:Vector">Vector</a> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Generic-Mutable-Base.html#t:MVector">MVector</a> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">data</span> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a> = <a name="v:V_KB2Sum" class="def">V_KB2Sum</a> (<a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> (<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">data</span> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> s <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a> = <a name="v:MV_KB2Sum" class="def">MV_KB2Sum</a> (<a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> s (<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>))</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:kb2" class="def">kb2</a> :: <a href="Numeric-Sum.html#t:KB2Sum">KB2Sum</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></p><div class="doc"><p>Return the result of an order-2 Kahan-Babu&#353;ka sum.</p></div></div><h1 id="g:5">Less desirable approaches</h1><h2 id="g:6">Kahan summation</h2><div class="top"><p class="src"><span class="keyword">data</span> <a name="t:KahanSum" class="def">KahanSum</a></p><div class="doc"><p>Kahan summation. This is the least accurate of the compensated
 summation methods.  In practice, it only beats naive summation for
 inputs with large magnitude.  Kahan summation can be <em>less</em>
 accurate than naive summation for small-magnitude inputs.</p><p>This summation method is included for completeness. Its use is not
 recommended.  In practice, <code><a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></code> is both 30% faster and more
 accurate.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:KahanSum" class="def">KahanSum</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> !<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:KahanSum" class="caption collapser" onclick="toggleSection('i:KahanSum')">Instances</p><div id="section.i:KahanSum" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Eq.html#t:Eq">Eq</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Data-Data.html#t:Data">Data</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../base-4.8.2.0/Text-Show.html#t:Show">Show</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../deepseq-1.4.1.1/Control-DeepSeq.html#t:NFData">NFData</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Unbox">Unbox</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="Numeric-Sum.html#t:Summation">Summation</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Generic.html#t:Vector">Vector</a> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><a href="../vector-0.11.0.0/Data-Vector-Generic-Mutable-Base.html#t:MVector">MVector</a> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">data</span> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a> = <a name="v:V_KahanSum" class="def">V_KahanSum</a> (<a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:Vector">Vector</a> (<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>))</span></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="keyword">data</span> <a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> s <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a> = <a name="v:MV_KahanSum" class="def">MV_KahanSum</a> (<a href="../vector-0.11.0.0/Data-Vector-Unboxed.html#t:MVector">MVector</a> s (<a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>, <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a>))</span></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:kahan" class="def">kahan</a> :: <a href="Numeric-Sum.html#t:KahanSum">KahanSum</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></p><div class="doc"><p>Return the result of a Kahan sum.</p></div></div><h2 id="g:7">Pairwise summation</h2><div class="top"><p class="src"><a name="v:pairwiseSum" class="def">pairwiseSum</a> :: <a href="../vector-0.11.0.0/Data-Vector-Generic.html#t:Vector">Vector</a> v <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> =&gt; v <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a> -&gt; <a href="../base-4.8.2.0/Prelude.html#t:Double">Double</a></p><div class="doc"><p><em>O(n)</em> Sum a vector of values using pairwise summation.</p><p>This approach is perhaps 10% faster than <code><a href="Numeric-Sum.html#t:KBNSum">KBNSum</a></code>, but has poorer
 bounds on its error growth.  Instead of having roughly constant
 error regardless of the size of the input vector, in the worst case
 its accumulated error grows with <em>O(log n)</em>.</p></div></div><h1 id="g:8">References</h1><div class="doc"><ul><li>Kahan, W. (1965), Further remarks on reducing truncation
   errors. <em>Communications of the ACM</em> 8(1):40.</li><li>Neumaier, A. (1974), Rundungsfehleranalyse einiger Verfahren zur
   Summation endlicher Summen.
   <em>Zeitschrift f&#252;r Angewandte Mathematik und Mechanik</em> 54:39&#8211;51.</li><li>Klein, A. (2006), A Generalized
   Kahan-Babu&#353;ka-Summation-Algorithm. <em>Computing</em> 76(3):279-293.</li><li>Higham, N.J. (1993), The accuracy of floating point
   summation. <em>SIAM Journal on Scientific Computing</em> 14(4):783&#8211;799.</li></ul></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>